<%- include("../../layouts/admin-navbar") -%>

<% if(del.length > 0){%>
    <script>
        Swal.fire(
            'Product successfully deleted',
            '',
            'success'
        )
    </script>
<%} %>

<% if(edit.length > 0){%>
  <script>
      Swal.fire(
          'Product successfully edited',
          '',
          'success'
      )
  </script>
<%} %>

<div class="category">
  <p class="title">Products</p>
  <button id="openAdd" class="add-remove-content" onclick="window.location.href='/admin/product/add'"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <line x1="12" y1="5" x2="12" y2="19" />
    <line x1="5" y1="12" x2="19" y2="12" />
  </svg></button>

    <table class="table table-hover bg-light table-striped container">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Category</th>
            <th scope="col">Sales</th>
            <th scope="col">Stock</th>
            <th scope="col">Edit</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
            <% products.forEach(data => {%>
                <tr>
                    <td><%= data.name %></td>
                    <td><%= data.category %></td>
                    <td><%= data.score %></td>
                    <% if(data.instock == true){%>
                      <td><form action="/admin/product/out-stock/<%= data.id%>?_method=PUT" method="post">
                        <button class="edit-btn bg-success"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-shopping-cart-plus" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                          <circle cx="6" cy="19" r="2" />
                          <circle cx="17" cy="19" r="2" />
                          <path d="M17 17h-11v-14h-2" />
                          <path d="M6 5l6.005 .429m7.138 6.573l-.143 .998h-13" />
                          <path d="M15 6h6m-3 -3v6" />
                        </svg></button>
                      </form></td>
                    <%} %>

                    <% if(data.instock == false){%>
                      <td><form action="/admin/product/in-stock/<%= data.id%>?_method=PUT" method="post">
                        <button class="edit-btn bg-primary"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-shopping-cart-off" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                          <circle cx="6" cy="19" r="2" />
                          <path d="M17 17a2 2 0 1 0 2 2" />
                          <path d="M17 17h-11v-11" />
                          <path d="M9.239 5.231l10.761 .769l-1 7h-2m-4 0h-7" />
                          <path d="M3 3l18 18" />
                        </svg></button>
                      </form></td>
                    <%} %>

                      <td><button class="edit-btn" onclick="window.location.href='/admin/product/edit/<%= data.id%>'"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-pencil" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
                        <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
                      </svg></button></td>

                      <td><form action="/admin/product/delete/<%= data.id%>?_method=DELETE" method="post">
                        <button class="delete-btn"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                          <line x1="4" y1="7" x2="20" y2="7" />
                          <line x1="10" y1="11" x2="10" y2="17" />
                          <line x1="14" y1="11" x2="14" y2="17" />
                          <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                          <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                        </svg></button>
                      </form></td>
                </tr>
            <%}) %>
        </tbody>
      </table>
</div>

<%- include("../../layouts/footer") -%>